let a;window.addEventListener("beforeinstallprompt",n=>{n.preventDefault(),a=n});document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("mobileMenuButton"),c=document.getElementById("topNavMenu");n&&c&&n.addEventListener("click",()=>{c.classList.toggle("hidden")});const i=document.getElementById("mediaToggle"),d=document.getElementById("mediaSubmenu");i&&d&&i.addEventListener("click",()=>{d.classList.toggle("hidden")});const u=document.querySelectorAll("[data-filter]"),g=document.querySelectorAll("[data-category]");u.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-filter");g.forEach(s=>{const h=s.getAttribute("data-category")===t;s.classList.toggle("hidden",!h)})})});const o=document.getElementById("lightbox"),l=document.getElementById("lightboxImage"),r=document.getElementById("lightboxClose");document.querySelectorAll("[data-lightbox]").forEach(e=>{e.addEventListener("click",()=>{l.src=e.getAttribute("data-lightbox")||e.src,o.classList.remove("hidden"),o.classList.add("flex")})}),r&&r.addEventListener("click",()=>{o.classList.add("hidden"),o.classList.remove("flex"),l.src=""});const m=document.querySelectorAll("[data-animate]");m.forEach(e=>{e.classList.add("opacity-0","translate-y-4")});const f=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&(t.target.classList.remove("opacity-0","translate-y-4"),t.target.classList.add("transition","duration-500"))})},{threshold:.15});m.forEach(e=>f.observe(e)),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js"),document.querySelectorAll("[data-pwa-install]").forEach(e=>{e.addEventListener("click",async t=>{if(t.preventDefault(),a)a.prompt(),await a.userChoice,a=null;else{const s=e.getAttribute("href")||"/manifest.webmanifest";window.location.href=s}})})});
