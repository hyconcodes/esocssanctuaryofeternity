let s;window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),s=t});document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("mobileMenuButton"),n=document.getElementById("topNavMenu");t&&n&&t.addEventListener("click",()=>{n.classList.toggle("hidden")});const a=document.getElementById("mediaToggle"),i=document.getElementById("mediaSubmenu");a&&i&&a.addEventListener("click",()=>{i.classList.toggle("hidden")});const u=document.querySelectorAll("[data-filter]"),g=document.querySelectorAll("[data-category]");u.forEach(e=>{e.addEventListener("click",()=>{const o=e.getAttribute("data-filter");g.forEach(d=>{const h=d.getAttribute("data-category")===o;d.classList.toggle("hidden",!h)})})});const c=document.getElementById("lightbox"),l=document.getElementById("lightboxImage"),r=document.getElementById("lightboxClose");document.querySelectorAll("[data-lightbox]").forEach(e=>{e.addEventListener("click",()=>{l.src=e.getAttribute("data-lightbox")||e.src,c.classList.remove("hidden"),c.classList.add("flex")})}),r&&r.addEventListener("click",()=>{c.classList.add("hidden"),c.classList.remove("flex"),l.src=""});const m=document.querySelectorAll("[data-animate]");m.forEach(e=>{e.classList.add("opacity-0","translate-y-4")});const f=new IntersectionObserver(e=>{e.forEach(o=>{o.isIntersecting&&(o.target.classList.remove("opacity-0","translate-y-4"),o.target.classList.add("transition","duration-500"))})},{threshold:.15});m.forEach(e=>f.observe(e)),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js"),document.querySelectorAll("[data-pwa-install]").forEach(e=>{e.addEventListener("click",async o=>{if(o.preventDefault(),s)s.prompt(),await s.userChoice,s=null;else{const d=e.getAttribute("href")||"/manifest.webmanifest";window.location.href=d}})})});window.addEventListener("load",()=>{const t=document.querySelector("[data-preloader]");t&&(t.classList.add("opacity-0","pointer-events-none"),setTimeout(()=>t.remove(),300));const n=document.querySelector("[data-announcement-modal]");n&&n.classList.remove("hidden")});document.addEventListener("click",t=>{const n=t.target.closest("[data-announcement-close]");if(n){const a=n.closest("[data-announcement-modal]");a&&a.classList.add("hidden")}});
